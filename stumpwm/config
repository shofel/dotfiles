;; vim: set ft=lisp:

(in-package :stumpwm)

(set-prefix-key (kbd "C-t")) ; "C-t" is the default value.

(setf *message-window-gravity* :center)
(setf *input-window-gravity* :center)

;; Don't focus with mouse to encourage more keyboard usage.
(setf *mouse-focus-policy* :ignore) ; :ignore :sloppy :click

;; Define the volume control and mute keys.
(define-key *top-map* (kbd "XF86AudioLowerVolume") "exec pactl set-sink-volume 0 -5%")
(define-key *top-map* (kbd "XF86AudioRaiseVolume") "exec pactl set-sink-volume 0 +5%")
(define-key *top-map* (kbd "XF86AudioMute") "exec pactl set-sink-mute 0 toggle")


;;; Define a set of single keys for the most frequent actions.

;; Change frames.

(define-key *top-map* (kbd "Left") "move-focus left")
(define-key *top-map* (kbd "Right") "move-focus right")

;; Move windows.

(define-key *root-map* (kbd "Left") "move-window left")
(define-key *root-map* (kbd "Right") "move-window right")

;; Change groups.

(define-key *top-map* (kbd "C-Left") "gprev left")
(define-key *top-map* (kbd "C-Right") "gnext right")


;; Switch input languages.
;; (define-key *root-map* (kbd "C-l") "exec fcitx-remote -t")

;; Restore groups and frames.
(restore-from-file "~/.config/stumpwm/desktop")

;; Restore window placement rules.
(restore-window-placement-rules "~/.config/stumpwm/window-placement")

;; Run the apps.
(when (not (ignore-errors *apps-started*))
  (run-commands "exec firefox"
                "exec google-chrome"
                "exec google-chrome-beta"
                "exec Telegram")
  (defparameter *apps-started* T))

;; Fix up the groups.
(run-commands "gselect Default"
              "gkill"
              "gselect three")
